---
import HomeIcon from './icons/HomeIcon.astro'
import ProjectsIcon from './icons/ProjectsIcon.astro'
import StackIcon from './icons/StackIcon.astro'
import EnvelopeIcon from './icons/EnvelopeIcon.astro'
import SearchIcon from './icons/SearchIcon.astro'

const pathname = new URL(Astro.request.url).pathname
---

<aside 
  class="hidden xl:flex xl:flex-col
  dark:[&>a:hover]:text-white [&>a]:transition 
  text-gray-500 [&>a:hover]:text-blue-500 fixed xl:h-[100vh] 
  xl:w-fit screen xl:pl-2 justify-center bottom-0 py-3 backdrop-blur gap-10">
  <a href="/" class=`menu-icon size-8 ${pathname === '/' ? 'text-blue-500 dark:text-white' : ''}`>
    <HomeIcon />
  </a>
  <a href="/projects" class=`menu-icon size-8 ${pathname === '/projects' ? 'text-blue-500 dark:text-white' : ''}`>
    <ProjectsIcon />
  </a>
  <a href="/stack" class=`menu-icon size-8 ${pathname === '/stack' ? 'text-blue-500 dark:text-white' : ''}`>
    <StackIcon />
  </a>
  <a href="/contact" class=`menu-icon size-8 ${pathname === '/contact' ? 'text-blue-500 dark:text-white' : ''}`>
    <EnvelopeIcon />
  </a>
  <button
    id="searchButton"
    class=`menu-icon hover:text-blue-500 dark:hover:text-white size-8 ${pathname === '/search' ? 'text-blue-500 dark:text-white' : ''}`
  >
    <SearchIcon />
  </button>
</aside>

<style>
  .menu-icon:hover {
    cursor: pointer;
    transform: scale(1.15);
  }
</style>

<script>
  const searchButton = document.getElementById('searchButton')
  searchButton?.addEventListener("click", () => {
    var event = new KeyboardEvent("keydown", {
      key: "K",
      code: "KeyK",
      keyCode: 75,
      which: 75,
      ctrlKey: true,
      altKey: false,
      shiftKey: false,
      metaKey: false
    })

    document.dispatchEvent(event)
  })
</script>
